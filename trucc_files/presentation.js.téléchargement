// la page affichée
var page=0;
var cookieName="page";

function pageSuivante() {
	montrerPageCourante('none');
	page++;
        $.cookie(cookieName, page);
	montrerPageCourante('block');
}

function pagePrecedente() {
	montrerPageCourante('none');
	page--;
        $.cookie(cookieName, page);
	montrerPageCourante('block');
}


//Racourcis clavier

function touche(e)
{
    var keynum;
    var keychar;
    if (e.target)
    {
	targ=e.target;
    }
    else if (e.srcElement)
    {
	targ=e.srcElement;
    }
    
    if (targ.tagName=="INPUT" || targ.tagName=="TEXTAREA") return ;
    if(window.event) // IE
    {
	keynum = e.keyCode;
    }
    else if(e.which) // Netscape/Firefox/Opera
    {
	keynum = e.which;
    }
    keychar = String.fromCharCode(keynum);
    switch (keychar) {
    case ' ' :
    case 'N' :
    case 'n' : pageSuivante() ;break;     
    case 'P' :
    case 'p' : pagePrecedente() ;break;
	
    }
}


// Affiche le numéro de la page courante dans l'élément div prévu à cet effet
function montrerPageCourante(value) {
	var pageElt= document.getElementById('page' + page)
	if (pageElt != null) {
		pageElt.style.display= value;
		document.getElementById('pageNumber').innerHTML=page;
	}
	
}

// saute à une page donnée
function allerALaPage(num) {
    montrerPageCourante('none');
    page=num;
     $.cookie(cookieName, page);
    montrerPageCourante('block');
}


function numeroterLesPages() {
    var p= 0;
    var divs= document.getElementsByTagName("div");
    for (var i=0; i < divs.length; i++) {
	var elt= divs[i]; 
	if (elt.className=="page") {
	    // className fonctionne partout.
	    // elt.getAttribute("class") retournerait null sous IE 6
	    p++;
	    elt.id= "page" + p;
	}
    }
}

// Fonction appelée au chargement du document.
function commencerPresentation(nomPresentation) {
        cookieName= page+ nomPresentation;
	numeroterLesPages();
	var debut=1;
    	
        if ($.cookie(cookieName)) {debut=$.cookie(cookieName);}
	allerALaPage(debut);
}

// Va à la page indiquée par le champ "champPage".
function sauterSelonChamp() {
    var p=document.getElementById("champPage").value;
    allerALaPage(p);
    return false;
}

// Montre le texte du code d'un div (ou autre)
// arguments:
// divId: l'élément dont on veut afficher le code
// destId: l'élément dans lequel on affichera le code... a intérêt à être un <pre></pre> !
function montreCode(divId,destId) {
	var text= document.getElementById(divId).innerHTML;
	var n= document.createTextNode(text);
	var dest=document.getElementById(destId);
	dest.appendChild(n);
}


function imprimer() {
    var p= 0;
    var divs= document.getElementsByTagName("div");
    for (var i=0; i < divs.length; i++) {
	var elt= divs[i]; 
	if (elt.className=="page") {
	    elt.style.display="block";
	}
    }
    window.print();
    for (var i=0; i < divs.length; i++) {
	var elt= divs[i]; 
	if (elt.className=="page") {
	    elt.style.display="none";
	}
    }
    allerALaPage(1);
}
